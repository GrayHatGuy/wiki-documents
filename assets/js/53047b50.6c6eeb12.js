"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[69875],{3905:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>m});var a=n(67294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var l=a.createContext({}),p=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),c=p(n),h=i,m=c["".concat(l,".").concat(h)]||c[h]||u[h]||r;return n?a.createElement(m,o(o({ref:t},d),{},{components:n})):a.createElement(m,o({ref:t},d))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},36161:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>r,metadata:()=>s,toc:()=>p});var a=n(87462),i=(n(67294),n(3905));const r={description:"ChatGPT & DALL\xb7E with Indicator",title:"ChatGPT & DALL\xb7E Application Development",keywords:["SenseCAP Indicator ChatGPT DALL\xb7E Application Development"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_Indicator_Application_ChatGPT",last_update:{date:"5/25/2023",author:"Thomas"}},o="SenseCAP Indicator x ChatGPT x DALL\xb7E Application Development",s={unversionedId:"Sensor/SenseCAP/SenseCAP_Indicator/Application/OpenAI",id:"Sensor/SenseCAP/SenseCAP_Indicator/Application/OpenAI",title:"ChatGPT & DALL\xb7E Application Development",description:"ChatGPT & DALL\xb7E with Indicator",source:"@site/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/OpenAI.md",sourceDirName:"Sensor/SenseCAP/SenseCAP_Indicator/Application",slug:"/SenseCAP_Indicator_Application_ChatGPT",permalink:"/SenseCAP_Indicator_Application_ChatGPT",draft:!1,editUrl:"https://github.com/Seeed-Studio/wiki-documents/blob/docusaurus-version/docs/Sensor/SenseCAP/SenseCAP_Indicator/Application/OpenAI.md",tags:[],version:"current",lastUpdatedBy:"Thomas",lastUpdatedAt:1684972800,formattedLastUpdatedAt:"May 25, 2023",frontMatter:{description:"ChatGPT & DALL\xb7E with Indicator",title:"ChatGPT & DALL\xb7E Application Development",keywords:["SenseCAP Indicator ChatGPT DALL\xb7E Application Development"],image:"https://files.seeedstudio.com/wiki/wiki-platform/S-tempor.png",slug:"/SenseCAP_Indicator_Application_ChatGPT",last_update:{date:"5/25/2023",author:"Thomas"}},sidebar:"ProductSidebar",previous:{title:"How To Flash The Default Firmware",permalink:"/SenseCAP_Indicator_How_To_Flash_The_Default_Firmware"},next:{title:"Home Assistant Application Development",permalink:"/SenseCAP_Indicator_Application_Home_Assistant"}},l={},p=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Get Started",id:"get-started",level:2},{value:"Function",id:"function",level:3},{value:"<strong>ChatGPT flowchart</strong>",id:"chatgpt-flowchart",level:4},{value:"<strong>DALLE flowchart</strong>",id:"dalle-flowchart",level:4},{value:"Example Code",id:"example-code",level:2},{value:"ChatGPT Code",id:"chatgpt-code",level:3},{value:"DALL\xb7E Code",id:"dalle-code",level:3}],d={toc:p};function c(e){let{components:t,...n}=e;return(0,i.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"sensecap-indicator-x-chatgpt-x-dalle-application-development"},"SenseCAP Indicator x ChatGPT x DALL\xb7E Application Development"),(0,i.kt)("p",null,"This guide will provide you with information on how to organize the OpenAI Demo for quick addition, deletion, and modification of programs according to the provided BSP (Board Support Package)."),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/GPT_RES_BE_RICH.JPG"})),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:680,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/DALL_1_CAT.JPG"})),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"One ",(0,i.kt)("a",{parentName:"li",href:"https://www.seeedstudio.com/SenseCAP-Indicator-D1-p-5643.html"},"SenseCAP Indicator")),(0,i.kt)("li",{parentName:"ul"},"The ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/espressif/esp-idf"},"ESP-IDF")," toolchain installed on your computer")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"If you want to learn how to change the user interface (UI), you can refer to the guide: ",(0,i.kt)("a",{parentName:"p",href:"/SenseCAP_Indicator_How_to_Create_your_own_UI"},"How to Create your own UI")),(0,i.kt)("p",{parentName:"admonition"},"If you haven't installed the IDF toolchain yet, you can follow the instructions in the guide: ",(0,i.kt)("a",{parentName:"p",href:"/SenseCAP_Indicator_How_To_Flash_The_Default_Firmware"},"How_To_Flash_The_Default_Firmware"))),(0,i.kt)("h2",{id:"get-started"},"Get Started"),(0,i.kt)("p",null,"The main code related to the OpenAI startup flowchart is shown below:"),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/Indicator_openai_sys.png"})),(0,i.kt)("h3",{id:"function"},"Function"),(0,i.kt)("p",null,"The SenseCAP Indicator x ChatGPT x DALL\xb7E Application is developed based on the MVC (Model-View-Controller) architecture. The project's workflow indicates its reliance on the MVC architecture."),(0,i.kt)("p",null,"In this architecture, the components are structured as follows:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"View: The View handles various event-triggered signals and utilizes LVGL (Light and Versatile Graphics Library) for driving the display.")),(0,i.kt)("admonition",{type:"note"},(0,i.kt)("p",{parentName:"admonition"},"To quickly build the user interface (UI), you can use ",(0,i.kt)("a",{parentName:"p",href:"https://squareline.io/"},"SquareLine Studio"),", which is also employed in our project. Recommend using SquareLine Studio version 1.3.0 to ensure a smooth and seamless experience while following this guide..")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Model: The Model contains the ",(0,i.kt)("inlineCode",{parentName:"li"},"indicator_openai.c")," file, which includes the ",(0,i.kt)("inlineCode",{parentName:"li"},"indicator_openai_init()")," function. When executed at the Model entry, this function sends requests to OpenAI, receives responses, and parses them for display on the screen through the View.")),(0,i.kt)("p",null,"Here are the key functions and workflow of the Model (once ",(0,i.kt)("a",{parentName:"p",href:"/SenseCAP_Indicator_How_to_Set_the_API_Key"},"the API Key")," is saved):"),(0,i.kt)("h4",{id:"chatgpt-flowchart"},(0,i.kt)("strong",{parentName:"h4"},"ChatGPT flowchart")),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/model_openai.png"})),(0,i.kt)("h4",{id:"dalle-flowchart"},(0,i.kt)("strong",{parentName:"h4"},"DALLE flowchart")),(0,i.kt)("div",{align:"center"},(0,i.kt)("img",{width:800,src:"https://files.seeedstudio.com/wiki/SenseCAP/SenseCAP_Indicator/model_openai_DALLE.png"})),(0,i.kt)("h2",{id:"example-code"},"Example Code"),(0,i.kt)("p",null,"To utilize the OpenAI service, we need to implement functions that can send requests to OpenAI, receive responses, and parse the JSON response. The following code snippet illustrates the necessary code structure:"),(0,i.kt)("h3",{id:"chatgpt-code"},"ChatGPT Code"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"/* HTTPS Request & get Response*/\nstatic int chat_request(struct view_data_openai_request *p_req,\n                        struct view_data_openai_response *p_resp);\n\n/* Json Prase*/\nstatic int __chat_json_prase(const char *p_str, char *p_answer, char *p_err);\n")),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"chat_request(...)")," function in ",(0,i.kt)("inlineCode",{parentName:"p"},"indicator_openai.c")," is responsible for sending requests to the OpenAI API, receiving responses, and parsing the JSON response. It generates an HTTP request encapsulating user-supplied data and communicates with the server using ",(0,i.kt)("inlineCode",{parentName:"p"},"mbedtls_send_then_recv(...)"),"."),(0,i.kt)("p",null,"To add a prompt to your application, you can modify the ",(0,i.kt)("inlineCode",{parentName:"p"},"data_buf")," variable in the ",(0,i.kt)("inlineCode",{parentName:"p"},"chat_request(...)")," function as follows:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Adding Prompt:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'data_len += sprintf(data_buf + data_len, "Your are SenseCAP Indicator, developed by Seeed Studio, has been launched on April 20th, 2023.");\ndata_len += sprintf(data_buf + data_len, "You are a 4-inch touch screen driven by ESP32 and RP2040 dual-MCU,");\ndata_len += sprintf(data_buf + data_len, "and support Wi-Fi/BLE/LoRa communication.");\ndata_len += sprintf(data_buf + data_len, "You are a fully open-source powerful IoT development platform for developers.");\ndata_len += sprintf(data_buf + data_len, "You are on behalf of Seeed Studio to answer requests.");\ndata_len += sprintf(data_buf + data_len, "Each time your answer text should not exceed 100 words.");\ndata_len += sprintf(data_buf + data_len, "My first sentence is [");\ndata_len += sprintf(data_buf + data_len, "%s", p_req->question); // user input\ndata_len += sprintf(data_buf + data_len, "]");\ndata_len += sprintf(data_buf + data_len, "\\"}]}");\n')),(0,i.kt)("p",null,"In this function, ",(0,i.kt)("inlineCode",{parentName:"p"},"mbedtls_send_then_recv")," is called to do the request and get method."),(0,i.kt)("h3",{id:"dalle-code"},"DALL\xb7E Code"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"Principle: When a request is successful, it returns a URL address. By downloading and decoding the image from this URL link, it can be displayed.")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"// HTTPS Request & get Response\nstatic int image_request(struct view_data_openai_request *p_req,\n                     struct view_data_openai_response *p_resp);\n\n// Json Prase\nstatic int __image_json_prase(const char *p_str, char *p_url, char *p_err);\n\n// prase URL to download\nstatic void url_prase(char *p_url, char *p_host, char *p_path);\n")),(0,i.kt)("p",null,"Same as ",(0,i.kt)("a",{parentName:"p",href:"/SenseCAP_Indicator_Application_ChatGPT#chatgpt-code"},"ChatGPT Code"),", in the initial request, we will utilize a prompt to obtain the image URL. After acquiring the URL, we will attempt to download the image to the local buffer using the obtained URL."),(0,i.kt)("p",null,"For the detailed code, please refer to ",(0,i.kt)("inlineCode",{parentName:"p"},"indicator_openai.c")," on ",(0,i.kt)("a",{parentName:"p",href:"https://raw.githubusercontent.com/Seeed-Solution/SenseCAP_Indicator_ESP32/main/examples/indicator_openai/main/model/indicator_openai.c"},"GitHub"),"."),(0,i.kt)("h1",{id:"resource"},"Resource"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://github.com/Seeed-Solution/SenseCAP_Indicator_ESP32"},"SenseCAP_Indicator_ESP32 \xb7 GitHub")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/SenseCAP_Indicator_ChatGPT"},"SenseCAP_Indicator_ChatGPT Chat Completions")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"/SenseCAP_Indicator_DALL%C2%B7E"},"SenseCAP_Indicator_DALL\xb7E Image Generation"))),(0,i.kt)("h1",{id:"tech-support"},(0,i.kt)("strong",{parentName:"h1"},"Tech Support")),(0,i.kt)("p",null,"Don't worry, we've got you covered! Please visit our ",(0,i.kt)("a",{parentName:"p",href:"https://discord.gg/cPpeuQMM"},"Seeed Official Discord Channel")," to ask your questions!"),(0,i.kt)("p",null,"If you have large order or customization requirement, please contact ",(0,i.kt)("a",{parentName:"p",href:"mailto:iot@seeed.cc"},"iot@seeed.cc")))}c.isMDXComponent=!0}}]);